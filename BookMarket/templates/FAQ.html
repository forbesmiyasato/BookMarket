{% if not standalone %} {% extends "layout.html" %} {% endif %}
{% block content %}
<!-- Start Banner Area -->
<section class="banner-area organic-breadcrumb">
  <div class="container">
    <div class="breadcrumb-banner d-flex flex-wrap align-items-center justify-content-end">
      <div class="col-first">
        <h1>Help</h1>
        <nav class="d-flex align-items-center">
          <a onclick="linkClicked(document.getElementById('home'), '/home'); return false;" href="/home">Home<span
              class="lnr lnr-arrow-right"></span></a>
          <a class="nav-no-href">FAQ</a>
        </nav>
      </div>
    </div>
  </div>
</section>

<div class="help-container container">
  <div>
    <div class="help-grid show">
      <div class="help-item">
        <span class="help-item-icon material-icons-outlined">
          monetization_on
        </span>
        <h3>How to sell</h3>
      </div>
      <div class="help-item">
        <span class="help-item-icon material-icons-outlined">
          shop
        </span>
        <h3>How to buy</h3>
      </div>
      <div class="help-item">
        <span class="help-item-icon material-icons-outlined">
          note_add
        </span>
        <h3 style="text-align: center;">Request to add school</h3>
      </div>
      <div class="help-item">
        <span class="help-item-icon material-icons-outlined">
          question_answer
        </span>
        <h3 style="text-align: center;">FAQ</h3>
      </div>
      <div class="help-item">
        <span class="help-item-icon material-icons-outlined">
          bug_report
        </span>
        <h3>Report a bug</h3>
      </div>
      <div class="help-item">
        <span class="help-item-icon material-icons">
          help_outline
        </span>
        <h3>Need help?</h3>
      </div>
    </div>
    <div id="help-detail-container">
      <button class="genric-btn primary circle" id="help-back"><span class="material-icons">
          keyboard_backspace
        </span></button>
      <!-- sell -->
      <div class="help-detail" id="help-detail-0">
        <h2>How to start selling</h2>
        <p>1. <a class="nav-text" onclick="linkClicked(this, '/register')">Create an account</a> or <a class="nav-text"
            onclick="linkClicked(this, '/login')">Log
            in</a>&nbsp;&nbsp;<i class="fas fa-user"></i></p>
        <p>2. Make sure your account is <a class="nav-text" onclick="linkClicked(this, '/account')">confirmed</a> (if
          you haven't already)
          <i class="fas fa-user-check"></i></p>
        <p>3. Go to the <a class="nav-text" onclick="linkClicked(this, '/item/new')">sell</a> page and fill in your
          item details (a picture is worth a thousand words!) <i class="fas fa-money-check-alt"></i></p>
        <p>4. We'll send you an email when somebody is interested in your item.
          <i class="fas fa-envelope"></i></p>
        <p>5. Work out the details directly with the potential buyer. <i class="fas fa-handshake"></i>
        </p>
        <div>
          <p style="margin-bottom: 0;">6a. Meet in person to complete the transaction somewhere on campus <i
              class="fas fa-user-friends"></i></p>
          <span>or</span>
          <p>6b. Use your favorite payment service and ship your items. <i class="fas fa-shipping-fast"></i></p>
        </div>
        <div class="sell-notes">
          <span>*Only 10 postings allowed at a time</span>
          <br />
          <span>*Your email is private until you reply to a buyer</span>
        </div>
      </div>
      <!-- buy -->
      <div class="help-detail" id="help-detail-1">
        <h2>How to start buying</h2>
        <p>1. <a class="nav-text" onclick="linkClicked(this, '/register')">Create an account</a> or <a class="nav-text"
            onclick="linkClicked(this, '/login')">Log
            in</a>&nbsp;&nbsp;<i class="fas fa-user"></i></p>
        <p>2. Make sure your account is <a class="nav-text" onclick="linkClicked(this, '/account')">confirmed</a> (if
          you haven't already)
          <i class="fas fa-user-check"></i></p>
        <p>3. Go to the <a class="nav-text" onclick="linkClicked(this, '/shop')">shop</a> page and look for book/items
          you need <i class="fas fa-book"></i></p>
        <p>4. Message the seller directly and sort out the details <i class="fas fa-handshake"></i></p>
        <div>
          <p style="margin-bottom: 0;">5a. Meet in person to complete the transaction somewhere on campus <i
              class="fas fa-user-friends"></i></p>
          <span>or</span>
          <p>5b. Pay the buyer via a payment service and wait for
            your shipment. <i class="fas fa-shipping-fast"></i></p>
        </div>
        <div class="sell-notes">
          <span>*Your email will be provided to the seller</span>
          <br />
          <span>*Watch for (and report) inappropriate listings</span>
          <br />
          <span style="display: block; line-height: 1;">
            *For online purchases, We recommend payment services that provide buyer protection such as Paypal goods and
            services.
          </span>
        </div>
      </div>
      <!-- add school -->
      <div class="help-detail" id="help-detail-2">
        <div class="help-header-container">
          <h2>Don't see your school listed? Here's what you can do</h2>
        </div>
        <p>Contact us at addmyschool@unibooks.io - please include the school name, location, and contact details. <i
            class="fas fa-envelope"></i></p>
        <p>Requesters that inlcude an easilly-parsable list of their school's course numbers, names, and associated
          departments get top priority <i class="fas fa-smile"></i></p>
        <p>Consider making a donation - Unibooks is free, but adding coverage means increased costs. To keep it free, we
          rely on the kindness of our users!</p>
        <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
          <input type="hidden" name="cmd" value="_donations" />
          <input type="hidden" name="business" value="RBD2T8UZRX8PN" />
          <input type="hidden" name="item_name"
            value="Maintain the website and allow us to support more users and schools" />
          <input type="hidden" name="currency_code" value="USD" />
          <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0"
            name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button" />
          <img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1" />
        </form>
      </div>
      <!-- common questions -->
      <div class="help-detail" id="help-detail-3">
        <h2 class="mb-5">Common questions</h2>
        <div style="text-align: left;">
          <h6>What to do if I can't find the subject or course for my textbook?</h6>
          <p>Please contact us at contact@unibooks.io with information regarding the subject or course.
            Preferably with a link to the course or subject page from the University website. If it's a course
            place it under the "Other" section for now. We'll get back to you once the subject or course is added.
          </p>
          <h6>How safe are in person transactions?</h6>
          <p>We promote user safety by limiting all the sellers and buyers to local university students.
            We do so by enforcing registration with the local university email domain and restricting the user
            from selling items and messaging sellers before they confirm their account with their university email.
            However, we still cannot guarantee that the buyer or seller does NOT have a malicious intent. Therefore,
            <b>we strongly recommend performing the transaction at a public place on campus during the day.</b>
          </p>
          <h6>How do I confirm my account?</h6>
          <p>We automatically send you a confirmation email after you sign up. After that you can send a confirmation
            email every hour at your account page.
            <br />
            <a class="nav-text" onclick="linkClicked(this, '/register')">Create an account</a> or <a class="nav-text"
              onclick="linkClicked(this, '/login')">Log
              in</a> &#x2192; User &#x2192; Account &#x2192;
            <a class="genric-btn success circle" style="padding: 0 20px;">Send Confirmation Email to ...</a>
          </p>
          <h6>What personal information is given during transactions?</h6>
          <p>
            For the <b>Buyer</b>: Your university email address is given to the seller to let them reach you with.
          </p>
          <p>
            For the <b>Seller</b>: You have no personal information exposed until you decide to respond to the buyer.
            Using what method to reach out to the buyer is at your choice.
          </p>
          <h6>Is Unibooks a free service?</h6>
          <p>
            Yes! Unibooks is 100% free for you as a user. But it's not free for us to provide :( check out <a
              class="nav-text" onclick="linkClicked(this, '/donate')">this page</a> to learn more about how you can help
            us provide this service.
          </p>
        </div>
      </div>
      <!-- Report a bug -->
      <div class="help-detail" id="help-detail-4">
        <h2>Report a bug</h2>
        <div
          class="container-sm mb-5 contact-us-container {% if current_user.is_authenticated == False %}not-logged-in{% endif %}">
          {% if current_user.is_authenticated == True %}
          <p>Email us at bugs@unibooks.io</p>
          <p>OR</p>
          {% endif %}
          <div class="message-overlay">
            <div class="message-error-container">
              <div class="message-error">
                <p>Please <a class="log-in-text"
                    onclick="linkClicked(document.getElementById('login'), '{{url_for('userAuth.login', next='/help')}}'); return false"
                    href="{{url_for('userAuth.login', next='/help')}}">log
                    in</a> to contact us</p>
                <p>OR</p>
                <p>Reach us at support@unibooks.io</p>
              </div>
            </div>
          </div>
          <form method="POST" id="message-form" action="" enctype="multipart/form-data">
            {{message_form.hidden_tag()}}
            <fieldset class="form-group">
              {% include "message_form.html" %}
        </div>
      </div>
      <!-- help -->
      <div class="help-detail" id="help-detail-5">
        <h2>Need Help?</h2>
        <div
          class="container-sm mb-5 contact-us-container {% if current_user.is_authenticated == False %}not-logged-in{% endif %}">
          <p>Email us at help@unibooks.io</p>
          <p>OR</p>
          <div class="message-overlay">
            <div class="message-error-container">
              <div class="message-error">
                <p>Please <a class="log-in-text"
                    onclick="linkClicked(document.getElementById('login'), '{{url_for('userAuth.login', next='/help')}}'); return false"
                    href="{{url_for('userAuth.login', next='/help')}}">log
                    in</a> to contact us</p>
                <p>OR</p>
                <p>Reach us at support@unibooks.io</p>
              </div>
            </div>
          </div>
          <form method="POST" id="message-form-2" action="" enctype="multipart/form-data">
            {{message_form.hidden_tag()}}
            <fieldset class="form-group">
              {% include "message_form_2.html" %}
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  let change = null;

  function load(elem, i) {
    setTimeout(function () {
      elem.classList.add("load");
    }, 150 * i);
  }

  function deLoad(elem, i) {
    setTimeout(function () {
      elem.classList.remove("load");
    }, 150 * i);
  }

  const fadeIn = () => {
    console.log("FADE IN")
    let elements = document.querySelectorAll(".help-item");
    for (var i = 0; i < elements.length; i++) {
      load(elements[i], i);
      elements[i].onclick = fadeOut.bind(null, i);
    }
  }

  const changeContent = (num) => {
    document.getElementsByClassName('help-grid')[0].style.display = 'none';
    $(`#help-detail-${num}`).fadeIn(500);
    $('#help-back').fadeIn(500);
    load(document.getElementById(`help-detail-container`), 0)
    change = num;
  }

  const changeContentWrapper = (num) => {
    changeContent(num)
    let param = null;
    switch (num) {
      case 0:
        param = "how-to-sell";
        break;
      case 1:
        param = "how-to-buy";
        break;
      case 2:
        param = "request-add-school";
        break;
      case 3:
        param = "faq";
        break;
      case 4:
        param = "report-bug";
        break;
      case 5:
        param = "need-help";
        break;
    }
    console.log("PUSH")
    window.history.pushState(null, null, "?d=" + param);
  }
  const fadeOut = (num) => {
    let elements = document.querySelectorAll(".help-item");

    let count = 0;
    let x = num;
    deLoad(elements[num], count);
    elements[num].onclick = null;
    count++;
    x--;
    while (count < 6) {
      if (x < 0) x = 5;
      deLoad(elements[x], count);
      elements[x].onclick = null;
      x--;
      count++;
    }

    setTimeout(changeContentWrapper.bind(null, num), 1000)
  }

  const initializeHelpPage = () => {
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const detail = urlParams.get('d');
    switch (detail) {
      case "how-to-sell":
        changeContent(0);
        break;
      case "how-to-buy":
        changeContent(1);
        break;
      case "request-add-school":
        changeContent(2);
        break;
      case "need-help":
        changeContent(5);
        break;
      case "report-bug":
        changeContent(4);
        break;
      case "faq":
        changeContent(3);
        break;
      default:
        fadeIn();
        break;
    }
  }

  initializeHelpPage();

  document.getElementById('help-back').addEventListener(
    "click", function () {
      $('#help-back').fadeOut(500);
      deLoad(document.getElementById(`help-detail-container`))
      $(`#help-detail-${change}`).fadeOut(500, function () {
        fadeIn();
        document.getElementsByClassName('help-grid')[0].style.display = 'grid'
      });
      let details = document.querySelectorAll(".help-detail");
      window.history.pushState(null, null, window.location.pathname);
    }
  )
</script>
{% endblock content %}